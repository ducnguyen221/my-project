<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Whack-a-Workflow ‚Äî n8n Whack-a-mole Quiz</title>
  <style>
    :root{
      --bg0:#071525;
      --bg1:#0b2138;
      --panel:#0f2b47;
      --panel2:#0c223a;
      --line:rgba(255,255,255,.10);
      --text:#e9f2ff;
      --muted:rgba(233,242,255,.72);
      --good:#2fe38c;
      --bad:#ff5b6b;
      --warn:#ffd24a;
      --blue:#5cc7ff;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background: radial-gradient(1000px 600px at 15% 5%, rgba(92,199,255,.14), transparent 60%),
                  radial-gradient(900px 700px at 85% 30%, rgba(47,227,140,.10), transparent 55%),
                  linear-gradient(180deg, var(--bg0), #040b14 65%, #030812);
      overflow:hidden;
    }

    /* Subtle tech grid */
    .grid-bg{
      position:fixed; inset:0;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.04) 1px, transparent 1px);
      background-size: 48px 48px;
      opacity:.35;
      mask-image: radial-gradient(circle at 30% 20%, rgba(0,0,0,1), transparent 65%);
      pointer-events:none;
    }
    .glow{
      position:fixed; inset:-20%;
      background: radial-gradient(circle at 40% 35%, rgba(92,199,255,.10), transparent 45%),
                  radial-gradient(circle at 60% 55%, rgba(255,210,74,.08), transparent 45%),
                  radial-gradient(circle at 30% 70%, rgba(47,227,140,.08), transparent 45%);
      filter: blur(20px);
      pointer-events:none;
      animation: floatGlow 10s ease-in-out infinite alternate;
      opacity:.75;
    }
    @keyframes floatGlow{
      from{ transform: translate3d(-1%, -1%, 0) scale(1); }
      to  { transform: translate3d(1%, 1%, 0) scale(1.02); }
    }

    /* Layout */
    .app{
      position:relative;
      height:100%;
      display:flex;
      flex-direction:column;
    }
    header{
      position:sticky; top:0;
      z-index:10;
      background: linear-gradient(180deg, rgba(7,21,37,.92), rgba(7,21,37,.68));
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--line);
    }
    .header-inner{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      padding: 10px 14px;
      max-width: 1400px;
      margin: 0 auto;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 220px;
    }
    .logo{
      width:38px; height:38px;
      border-radius:12px;
      background: radial-gradient(circle at 30% 30%, rgba(92,199,255,.9), rgba(92,199,255,.2)),
                  linear-gradient(135deg, rgba(47,227,140,.35), rgba(255,210,74,.18));
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.12);
      position:relative;
      overflow:hidden;
    }
    .logo:after{
      content:"";
      position:absolute; inset:-30%;
      background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.28) 50%, transparent 65%);
      transform: rotate(12deg);
      animation: shimmer 2.8s linear infinite;
      opacity:.75;
    }
    @keyframes shimmer{ from{ transform: translateX(-40%) rotate(12deg);} to{ transform: translateX(40%) rotate(12deg);} }

    .brand h1{
      font-size: 14px;
      margin:0;
      line-height:1.15;
      letter-spacing:.2px;
    }
    .brand .sub{
      font-size: 12px;
      color: var(--muted);
      margin-top:2px;
    }

    .hud{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:center;
    }
    .pill{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 20px rgba(0,0,0,.18);
      min-width: 128px;
      justify-content:center;
    }
    .pill .k{ font-size:12px; color:var(--muted); }
    .pill .v{ font-weight: 700; font-size:13px; font-family: var(--mono); }
    .pill .dot{
      width:9px;height:9px;border-radius:999px;
      background: var(--blue);
      box-shadow: 0 0 14px rgba(92,199,255,.5);
    }
    .pill.good .dot{ background: var(--good); box-shadow: 0 0 14px rgba(47,227,140,.5); }
    .pill.bad .dot{ background: var(--bad); box-shadow: 0 0 14px rgba(255,91,107,.5); }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      min-width: 260px;
    }
    button{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius: 12px;
      padding: 10px 12px;
      color: var(--text);
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
      box-shadow: 0 12px 24px rgba(0,0,0,.18);
      font-weight: 700;
      letter-spacing:.2px;
    }
    button:hover{ background: rgba(255,255,255,.11); border-color: rgba(255,255,255,.18);}
    button:active{ transform: translateY(1px) scale(.99);}
    button.primary{
      background: linear-gradient(135deg, rgba(92,199,255,.35), rgba(47,227,140,.22));
      border-color: rgba(92,199,255,.35);
    }
    button.danger{
      background: rgba(255,91,107,.14);
      border-color: rgba(255,91,107,.30);
    }
    button.ghost{
      background: transparent;
      border-color: rgba(255,255,255,.12);
      box-shadow:none;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--muted);
      user-select:none;
      cursor:pointer;
      transition: background .18s ease, border-color .18s ease;
    }
    .chip:hover{ background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.16); }
    .chip input{ display:none; }
    .chip.on{ color: var(--text); border-color: rgba(92,199,255,.30); box-shadow: 0 0 0 2px rgba(92,199,255,.10) inset; }
    .chip .toggle{
      width:34px;height:18px;border-radius:999px;
      background: rgba(255,255,255,.14);
      position:relative;
      border: 1px solid rgba(255,255,255,.12);
    }
    .chip .toggle:after{
      content:"";
      width:14px;height:14px;border-radius:999px;
      position:absolute; top:1px; left:2px;
      background: rgba(255,255,255,.80);
      transition: transform .18s ease, background .18s ease;
    }
    .chip.on .toggle{ background: rgba(92,199,255,.22); border-color: rgba(92,199,255,.30); }
    .chip.on .toggle:after{ transform: translateX(16px); background: rgba(92,199,255,.90); }

    main{
      flex:1;
      display:flex;
      gap:12px;
      padding: 12px 14px 14px;
      max-width: 1400px;
      margin: 0 auto;
      width:100%;
      min-height:0;
    }

    /* Left panel: prompt/question */
    .panel{
      background: linear-gradient(180deg, rgba(15,43,71,.78), rgba(12,34,58,.72));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-width: 330px;
      flex: 1.05;
      min-height:0;
    }
    .panel .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 12px 12px 10px;
      border-bottom: 1px solid var(--line);
      background: rgba(0,0,0,.10);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }
    .badge .icon{ font-size:14px; }
    .panel .content{
      padding: 12px 14px 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:0;
    }
    .q{
      font-size: 16px;
      line-height: 1.35;
      margin:0;
    }
    .meta-row{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      color: var(--muted);
      font-size:12px;
    }
    .tag{
      font-family: var(--mono);
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
    }

    .hint-exp{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top: 6px;
    }
    .box{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.12);
      padding: 10px 10px;
    }
    .box .title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-size:12px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .box .body{
      font-size: 13px;
      color: var(--text);
      line-height: 1.35;
      white-space: pre-wrap;
    }
    .box.hidden .body{ display:none; }
    .box.hidden{ background: rgba(0,0,0,.08); }
    .reveal-row{
      display:flex; gap:10px; flex-wrap:wrap; margin-top:auto;
      padding-top: 6px;
    }
    .reveal-row button{ flex:1; min-width: 140px; }
    .reveal-row .small{
      padding: 10px 10px;
      font-weight: 800;
      border-radius: 12px;
    }

    /* Right: game board */
    .board{
      background: linear-gradient(180deg, rgba(15,43,71,.78), rgba(12,34,58,.72));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      flex: 1.35;
      min-height:0;
    }
    .board .topbar{
      padding: 12px;
      border-bottom: 1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      background: rgba(0,0,0,.10);
    }
    .board .topbar .left{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .board .topbar .right{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .progressbar{
      width: 220px;
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .progressbar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(92,199,255,.85), rgba(47,227,140,.85));
      border-radius: 999px;
      transition: width .25s ease;
    }

    .play-area{
      flex:1;
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height:0;
    }

    /* Holes grid */
    .holes{
      flex:1;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      min-height: 280px;
    }
    @media (max-width: 980px){
      main{flex-direction:column; overflow:auto;}
      body{overflow:auto;}
      .panel,.board{min-width: unset;}
      .holes{min-height: 260px;}
    }
    @media (max-width: 520px){
      .holes{grid-template-columns: repeat(2, 1fr);}
      .progressbar{width: 160px;}
      .brand{min-width: 160px;}
      .actions{min-width: 210px;}
    }

    .hole{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: radial-gradient(100px 80px at 50% 70%, rgba(0,0,0,.35), rgba(0,0,0,.10)),
                  linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      position:relative;
      overflow:hidden;
      box-shadow: 0 16px 26px rgba(0,0,0,.24);
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
      transform: translateZ(0);
    }
    .hole:before{
      content:"";
      position:absolute; inset: -1px -1px auto -1px;
      height: 32%;
      background: linear-gradient(180deg, rgba(92,199,255,.10), transparent);
      opacity:.65;
      pointer-events:none;
    }

    .mole{
      width: 100%;
      height: 100%;
      padding: 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      border-radius: 16px;
      transform: translateY(18px) scale(.92);
      opacity:0;
      pointer-events:none;
      transition: transform .16s ease, opacity .16s ease;
    }
    .mole.show{
      transform: translateY(0) scale(1);
      opacity:1;
      pointer-events:auto;
    }
    .mole .card{
      width:100%;
      height:100%;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:8px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      padding: 10px;
    }
    .mole .emoji{
      font-size: 28px;
      line-height: 1;
    }
    .mole .label{
      font-size: 13px;
      line-height: 1.25;
      color: var(--text);
      font-weight: 800;
      letter-spacing: .1px;
    }
    .mole .sub{
      font-size: 11.5px;
      color: var(--muted);
      line-height: 1.3;
      font-family: var(--mono);
    }

    .mole.correct .card{
      background: radial-gradient(200px 120px at 30% 20%, rgba(47,227,140,.18), rgba(0,0,0,.22));
      border-color: rgba(47,227,140,.34);
    }
    .mole.wrong .card{
      background: radial-gradient(200px 120px at 30% 20%, rgba(255,91,107,.16), rgba(0,0,0,.22));
      border-color: rgba(255,91,107,.34);
    }

    /* Feedback toast */
    .toast{
      position:fixed;
      left:50%;
      bottom: 16px;
      transform: translateX(-50%) translateY(20px);
      background: rgba(0,0,0,.65);
      border: 1px solid rgba(255,255,255,.14);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      max-width: min(860px, calc(100% - 24px));
      z-index: 50;
      backdrop-filter: blur(10px);
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(0);
    }
    .toast .row{
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .toast .big{
      font-size: 18px;
      line-height: 1;
      margin-top: 2px;
    }
    .toast .txt{
      font-size: 13px;
      line-height: 1.35;
      color: var(--text);
      white-space: pre-wrap;
    }
    .toast .muted{ color: var(--muted); font-size: 12px; margin-top: 2px; }

    /* Modal (Teacher) */
    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index:100;
      background: rgba(0,0,0,.60);
      backdrop-filter: blur(10px);
      padding: 16px;
    }
    .modal.open{ display:flex; }
    .modal .dialog{
      width: min(980px, 100%);
      max-height: min(90vh, 880px);
      background: linear-gradient(180deg, rgba(15,43,71,.92), rgba(12,34,58,.90));
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .dialog header{
      position:unset;
      border-bottom: 1px solid var(--line);
      background: rgba(0,0,0,.18);
    }
    .dialog .inner{
      padding: 12px 12px 14px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 12px;
      overflow:auto;
    }
    @media (max-width: 920px){
      .dialog .inner{ grid-template-columns: 1fr; }
    }
    textarea{
      width:100%;
      min-height: 280px;
      resize: vertical;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding: 10px;
      font-family: var(--mono);
      font-size: 12px;
      line-height: 1.35;
      outline:none;
    }
    textarea:focus{
      border-color: rgba(92,199,255,.40);
      box-shadow: 0 0 0 3px rgba(92,199,255,.10);
    }
    .field{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.10);
      padding: 10px;
    }
    .field label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .field input, .field select{
      width:100%;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
      color: var(--text);
      padding: 10px;
      font-weight: 700;
      outline:none;
    }
    .field input:focus, .field select:focus{
      border-color: rgba(92,199,255,.40);
      box-shadow: 0 0 0 3px rgba(92,199,255,.10);
    }
    .mini{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
    }
    .row2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .dialog .footer{
      padding: 12px;
      border-top: 1px solid var(--line);
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
      background: rgba(0,0,0,.12);
    }
    .kbd{
      font-family: var(--mono);
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--muted);
    }
    .status{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      font-size: 12px;
      user-select:none;
    }
    .status .led{
      width:10px;height:10px;border-radius:999px;background: var(--warn);
      box-shadow: 0 0 16px rgba(255,210,74,.4);
    }
    .status.on .led{ background: var(--good); box-shadow: 0 0 16px rgba(47,227,140,.45); }
    .status.on{ color: var(--text); border-color: rgba(47,227,140,.28); }

    /* Footer help */
    footer{
      padding: 10px 14px 14px;
      max-width: 1400px;
      margin: 0 auto;
      width:100%;
      color: var(--muted);
      font-size: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      border-top: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.18));
    }
    footer .help{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="glow"></div>
  <div class="grid-bg"></div>

  <div class="app" id="app">
    <header>
      <div class="header-inner">
        <div class="brand" title="Whack-a-Workflow (n8n Whack-a-mole)">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Whack-a-Workflow</h1>
            <div class="sub">n8n Whack-a-mole Quiz ‚Ä¢ offline ‚Ä¢ 5‚Äì15 ph√∫t</div>
          </div>
        </div>

        <div class="hud" aria-label="HUD">
          <div class="pill good" title="Th·ªùi gian c√≤n l·∫°i">
            <span class="dot"></span>
            <span class="k">Timer</span>
            <span class="v" id="hudTimer">00:00</span>
          </div>
          <div class="pill" title="ƒêi·ªÉm s·ªë">
            <span class="dot"></span>
            <span class="k">Score</span>
            <span class="v" id="hudScore">0</span>
          </div>
          <div class="pill" title="Chu·ªói combo">
            <span class="dot"></span>
            <span class="k">Combo</span>
            <span class="v" id="hudCombo">x0</span>
          </div>
          <div class="pill bad" title="Penalty (sai/ƒë·∫≠p nh·∫ßm)">
            <span class="dot"></span>
            <span class="k">Penalty</span>
            <span class="v" id="hudPenalty">0</span>
          </div>
        </div>

        <div class="actions">
          <button class="primary" id="btnStart" title="B·∫Øt ƒë·∫ßu / Ti·∫øp t·ª•c (Space)">‚ñ∂ Start</button>
          <button class="ghost" id="btnPause" title="T·∫°m d·ª´ng (Esc)">‚è∏ Pause</button>
          <button class="danger" id="btnReset" title="Reset game">‚Ü∫ Reset</button>
          <div class="chip" id="chipTeacher" title="Teacher Mode">
            <span>üë©‚Äçüè´ Teacher</span>
            <span class="toggle" aria-hidden="true"></span>
          </div>
        </div>
      </div>
    </header>

    <main>
      <!-- Left panel -->
      <section class="panel" aria-label="Question Panel">
        <div class="topbar">
          <div class="badge" id="roundBadge">
            <span class="icon">üß©</span>
            <span><b>Round</b>: <span id="hudRound">0</span>/<span id="hudTotal">0</span></span>
          </div>
          <div class="badge">
            <span class="icon">‚å®Ô∏è</span>
            <span class="kbd">Space</span> Next ‚Ä¢ <span class="kbd">R</span> Reveal ‚Ä¢ <span class="kbd">Esc</span> Pause
          </div>
        </div>

        <div class="content">
          <div class="meta-row">
            <span class="tag" id="tagTopic">TOPIC:n8n</span>
            <span class="tag" id="tagDifficulty">LEVEL:mix</span>
            <span class="tag" id="tagMode">MODE:Whack</span>
          </div>

          <p class="q" id="qText">
            Nh·∫•n <b>Start</b> ƒë·ªÉ b·∫Øt ƒë·∫ßu. Khi ‚Äúm·ª•c ti√™u ƒë√∫ng‚Äù xu·∫•t hi·ªán, h√£y ƒë·∫≠p nhanh! üí•
          </p>

          <div class="hint-exp">
            <div class="box hidden" id="hintBox">
              <div class="title">
                <span>üí° G·ª£i √Ω</span>
                <span class="kbd">R</span>
              </div>
              <div class="body" id="hintText">‚Äî</div>
            </div>

            <div class="box hidden" id="expBox">
              <div class="title">
                <span>üîç Gi·∫£i th√≠ch</span>
                <span class="kbd">R</span>
              </div>
              <div class="body" id="expText">‚Äî</div>
            </div>
          </div>

          <div class="reveal-row">
            <button class="small" id="btnNext" title="C√¢u ti·∫øp theo (Space)">‚è≠ Next</button>
            <button class="small" id="btnReveal" title="Hi·ªán G·ª£i √Ω/Gi·∫£i th√≠ch (R)">ü™Ñ Reveal</button>
            <button class="small" id="btnExport" title="Xu·∫•t k·∫øt qu·∫£ CSV">‚¨á Export CSV</button>
          </div>
        </div>
      </section>

      <!-- Right board -->
      <section class="board" aria-label="Game Board">
        <div class="topbar">
          <div class="left">
            <div class="status" id="statusGame">
              <span class="led"></span>
              <span id="statusText">READY</span>
            </div>
            <div class="badge" title="Lu·∫≠t ch∆°i nhanh">
              <span class="icon">üéØ</span>
              <span><b>ƒê·∫≠p ƒë√∫ng</b> + ƒëi·ªÉm ‚Ä¢ <b>ƒê·∫≠p sai</b> - ƒëi·ªÉm ‚Ä¢ Combo tƒÉng th∆∞·ªüng</span>
            </div>
          </div>
          <div class="right">
            <div class="badge" title="Progress">
              <span class="icon">üìå</span>
              <span>Progress</span>
            </div>
            <div class="progressbar" aria-label="Progress bar">
              <div id="progressFill"></div>
            </div>
          </div>
        </div>

        <div class="play-area">
          <div class="holes" id="holes" aria-label="Whack holes">
            <!-- 9 holes -->
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="help">
        <span class="badge"><span class="icon">üß†</span> M·∫πo l·ªõp h·ªçc: chia 2 ƒë·ªôi, m·ªói l∆∞·ª£t 1 b·∫°n l√™n ƒë·∫≠p 10s</span>
        <span class="badge"><span class="icon">‚öôÔ∏è</span> Teacher Mode: ch·ªânh timer, ƒë·ªô kh√≥, b·ªô c√¢u h·ªèi</span>
      </div>
      <div class="help">
        <span class="badge"><span class="icon">üìÑ</span> Offline: d·ªØ li·ªáu n·∫±m trong <span class="kbd">CONFIG</span> ƒë·∫ßu file</span>
      </div>
    </footer>
  </div>

  <!-- Teacher Modal -->
  <div class="modal" id="teacherModal" role="dialog" aria-modal="true" aria-labelledby="teacherTitle">
    <div class="dialog">
      <header>
        <div class="header-inner" style="padding:10px 12px; max-width:unset;">
          <div class="brand" style="min-width:unset;">
            <div class="logo" style="width:34px;height:34px;border-radius:12px;"></div>
            <div>
              <h1 id="teacherTitle" style="font-size:14px;margin:0;">Teacher Mode</h1>
              <div class="sub" style="font-size:12px;">Ch·ªânh c·∫•u h√¨nh ‚Ä¢ d√°n JSON ‚Ä¢ ki·ªÉm tra nhanh</div>
            </div>
          </div>
          <div class="actions" style="min-width:unset;">
            <button class="ghost" id="btnCloseTeacher">‚úï Close</button>
          </div>
        </div>
      </header>

      <div class="inner">
        <div class="field">
          <label>CONFIG (JSON) ‚Äî c√¢u h·ªèi/keyword demo v·ªÅ n8n</label>
          <textarea id="configEditor" spellcheck="false"></textarea>
          <div class="mini" style="margin-top:8px;">
            G·ª£i √Ω: M·ªói c√¢u n√™n c√≥ <span class="kbd">question</span>, <span class="kbd">correct</span> (keyword ƒë√∫ng),
            <span class="kbd">decoys</span> (keyword sai), <span class="kbd">hint</span>, <span class="kbd">explanation</span>.
          </div>
        </div>

        <div style="display:flex; flex-direction:column; gap:12px;">
          <div class="row2">
            <div class="field">
              <label>Th·ªùi l∆∞·ª£ng game (ph√∫t)</label>
              <input id="inpMinutes" type="number" min="1" max="15" step="1" />
            </div>
            <div class="field">
              <label>T·ªëc ƒë·ªô (ms) ‚Äî c√†ng th·∫•p c√†ng nhanh</label>
              <input id="inpTick" type="number" min="350" max="1600" step="50" />
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <label>Th·ªùi gian hi·ªÉn th·ªã 1 ‚Äúmole‚Äù (ms)</label>
              <input id="inpMoleLife" type="number" min="250" max="1400" step="50" />
            </div>
            <div class="field">
              <label>T·ªâ l·ªá ‚Äúm·ª•c ti√™u ƒë√∫ng‚Äù (%)</label>
              <input id="inpCorrectRate" type="number" min="10" max="90" step="5" />
            </div>
          </div>

          <div class="field">
            <label>Ch·∫ø ƒë·ªô c√¢u h·ªèi</label>
            <select id="selMode">
              <option value="keyword">Keyword (ƒë·∫≠p ƒë√∫ng keyword)</option>
              <option value="statement">Statement (ƒë·∫≠p ph√°t bi·ªÉu ƒë√∫ng)</option>
            </select>
            <div class="mini" style="margin-top:8px;">
              * Keyword: m·ªói l∆∞·ª£t s·∫Ω c√≥ 1 keyword ƒë√∫ng + nhi·ªÅu keyword nhi·ªÖu.<br/>
              * Statement: ‚Äúmole‚Äù l√† c√°c ph√°t bi·ªÉu; ch·ªçn ph√°t bi·ªÉu ƒë√∫ng.
            </div>
          </div>

          <div class="field">
            <label>Quick checklist</label>
            <div class="mini">
              ‚úÖ 16:9 + responsive ‚Ä¢ ‚úÖ Timer/Score/Progress ‚Ä¢ ‚úÖ Teacher Mode ‚Ä¢ ‚úÖ Export CSV ‚Ä¢ ‚úÖ Offline<br/>
              ‚å®Ô∏è Ph√≠m t·∫Øt: <span class="kbd">Space</span> Next, <span class="kbd">R</span> Reveal, <span class="kbd">Esc</span> Pause
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <button class="ghost" id="btnLoadSample">‚Ü© Load Sample</button>
        <button class="danger" id="btnApplyConfig">‚úÖ Apply & Close</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite">
    <div class="row">
      <div class="big" id="toastIcon">üéØ</div>
      <div>
        <div class="txt" id="toastText"></div>
        <div class="muted" id="toastSub"></div>
      </div>
    </div>
  </div>

  <script>
    /********************************************************************
     * CONFIG ‚Äî Ch·ªânh ·ªü Teacher Mode ho·∫∑c s·ª≠a tr·ª±c ti·∫øp d∆∞·ªõi ƒë√¢y
     * Topic: T·ª± ƒë·ªông h√≥a v·ªõi n8n (demo 10‚Äì20)
     ********************************************************************/
    const SAMPLE_CONFIG = {
      meta: {
        topic: "T·ª± ƒë·ªông h√≥a v·ªõi n8n",
        level: "mix",
        version: "1.0",
      },
      settings: {
        minutes: 6,           // 1‚Äì15
        tickMs: 900,          // nh·ªãp spawn (ms)
        moleLifeMs: 850,      // th·ªùi gian hi·ªÉn th·ªã 1 mole (ms)
        correctRate: 55,      // % xu·∫•t hi·ªán m·ª•c ti√™u ƒë√∫ng
        mode: "keyword"       // keyword | statement
      },
      // M·ªói item l√† 1 "round" (c√¢u h·ªèi / ch·ªß ƒë·ªÅ) -> game s·∫Ω xoay v√≤ng
      items: [
        {
          id: "n8n-001",
          tags: ["basics","workflow"],
          question: "Trong n8n, th√†nh ph·∫ßn n√†o ƒë·∫°i di·ªán cho m·ªôt b∆∞·ªõc x·ª≠ l√Ω (g·ªçi API, bi·∫øn ƒë·ªïi d·ªØ li·ªáu, ƒëi·ªÅu ki·ªán...)?",
          correct: { label: "Node", emoji:"üß©" },
          decoys: [
            { label:"Branch", emoji:"üåø" },
            { label:"Ticket", emoji:"üé´" },
            { label:"Widget", emoji:"üß±" },
            { label:"Template", emoji:"üìÑ" }
          ],
          hint: "üí° ƒê√¢y l√† kh·ªëi c∆° b·∫£n nh·∫•t trong workflow.",
          explanation: "‚úÖ Node l√† ƒë∆°n v·ªã x·ª≠ l√Ω trong n8n. ‚ùå Branch ch·ªâ l√† nh√°nh logic; Template/Widget kh√¥ng ph·∫£i kh√°i ni·ªám c·ªët l√µi c·ªßa n8n."
        },
        {
          id: "n8n-002",
          tags: ["trigger"],
          question: "Node n√†o th∆∞·ªùng d√πng ƒë·ªÉ k√≠ch ho·∫°t workflow theo l·ªãch (cron) trong n8n?",
          correct: { label: "Cron", emoji:"‚è∞" },
          decoys: [
            { label:"HTTP Request", emoji:"üåê" },
            { label:"Set", emoji:"‚úçÔ∏è" },
            { label:"Merge", emoji:"üîÄ" },
            { label:"NoOp", emoji:"ü´•" }
          ],
          hint: "üí° Li√™n quan ƒë·∫øn ch·∫°y theo ph√∫t/gi·ªù/ng√†y.",
          explanation: "‚úÖ Cron Trigger ch·∫°y theo l·ªãch. ‚ùå HTTP Request g·ªçi API; Set g√°n bi·∫øn; Merge h·ª£p d√≤ng d·ªØ li·ªáu."
        },
        {
          id: "n8n-003",
          tags: ["webhook","integration"],
          question: "Mu·ªën nh·∫≠n d·ªØ li·ªáu t·ª´ h·ªá th·ªëng b√™n ngo√†i g·ªçi v√†o n8n theo URL, d√πng node n√†o?",
          correct: { label: "Webhook", emoji:"ü™ù" },
          decoys: [
            { label:"Email Trigger", emoji:"‚úâÔ∏è" },
            { label:"Schedule", emoji:"üóìÔ∏è" },
            { label:"IF", emoji:"üß†" },
            { label:"SplitInBatches", emoji:"üì¶" }
          ],
          hint: "üí° ƒê√¢y l√† endpoint ƒë·ªÉ h·ªá th·ªëng kh√°c 'ƒë·∫©y' d·ªØ li·ªáu v√†o.",
          explanation: "‚úÖ Webhook t·∫°o URL ƒë·ªÉ nh·∫≠n request. ‚ùå Email Trigger nh·∫≠n email; IF l√† ƒëi·ªÅu ki·ªán; SplitInBatches d√πng chia batch."
        },
        {
          id: "n8n-004",
          tags: ["data","transform"],
          question: "Node n√†o th∆∞·ªùng d√πng ƒë·ªÉ g√°n/chu·∫©n h√≥a field d·ªØ li·ªáu ƒë·∫ßu ra (set fields) trong n8n?",
          correct: { label: "Set", emoji:"‚úçÔ∏è" },
          decoys: [
            { label:"Read Binary File", emoji:"üìÅ" },
            { label:"Execute Command", emoji:"üíª" },
            { label:"NoOp", emoji:"ü´•" },
            { label:"Wait", emoji:"‚è≥" }
          ],
          hint: "üí° D√πng ƒë·ªÉ t·∫°o/ch·ªçn/ƒë·ªïi t√™n field.",
          explanation: "‚úÖ Set node d√πng ch·ªânh fields. ‚ùå Wait ch·ªâ ch·ªù; Execute Command ch·∫°y l·ªánh; Read Binary File ƒë·ªçc file."
        },
        {
          id: "n8n-005",
          tags: ["logic","condition"],
          question: "Trong n8n, ƒë·ªÉ r·∫Ω nh√°nh theo ƒëi·ªÅu ki·ªán ƒë√∫ng/sai, b·∫°n th∆∞·ªùng d√πng node n√†o?",
          correct: { label: "IF", emoji:"üß†" },
          decoys: [
            { label:"Merge", emoji:"üîÄ" },
            { label:"Move Binary Data", emoji:"üß¨" },
            { label:"Code", emoji:"üßë‚Äçüíª" },
            { label:"Delay", emoji:"üê¢" }
          ],
          hint: "üí° T√™n node ch√≠nh l√† c·∫•u tr√∫c ƒëi·ªÅu ki·ªán ph·ªï bi·∫øn.",
          explanation: "‚úÖ IF t·∫°o nh√°nh true/false. ‚ùå Merge h·ª£p d·ªØ li·ªáu; Code ch·∫°y script; Delay/Wait l√† ch·ªù."
        },
        {
          id: "n8n-006",
          tags: ["api","http"],
          question: "Node n√†o d√πng ƒë·ªÉ g·ªçi REST API/HTTP endpoint trong n8n?",
          correct: { label: "HTTP Request", emoji:"üåê" },
          decoys: [
            { label:"Webhook", emoji:"ü™ù" },
            { label:"Cron", emoji:"‚è∞" },
            { label:"IF", emoji:"üß†" },
            { label:"SplitInBatches", emoji:"üì¶" }
          ],
          hint: "üí° T√™n node n√≥i th·∫≥ng nhi·ªám v·ª•: g·ª≠i request.",
          explanation: "‚úÖ HTTP Request g·ªçi API. ‚ùå Webhook nh·∫≠n request; Cron theo l·ªãch; IF r·∫Ω nh√°nh; SplitInBatches chia batch."
        },
        {
          id: "n8n-007",
          tags: ["loop","batch"],
          question: "Khi c·∫ßn x·ª≠ l√Ω danh s√°ch l·ªõn theo t·ª´ng nh√≥m nh·ªè (batch), d√πng node n√†o ph√π h·ª£p?",
          correct: { label: "SplitInBatches", emoji:"üì¶" },
          decoys: [
            { label:"Merge", emoji:"üîÄ" },
            { label:"Set", emoji:"‚úçÔ∏è" },
            { label:"Wait", emoji:"‚è≥" },
            { label:"NoOp", emoji:"ü´•" }
          ],
          hint: "üí° T√™n node c√≥ ch·ªØ 'Batches'.",
          explanation: "‚úÖ SplitInBatches x·ª≠ l√Ω theo batch. ‚ùå Merge h·ª£p d·ªØ li·ªáu; Wait l√† ch·ªù; NoOp kh√¥ng l√†m g√¨."
        },
        {
          id: "n8n-008",
          tags: ["data","combine"],
          question: "Trong n8n, ƒë·ªÉ h·ª£p nh·∫•t d·ªØ li·ªáu t·ª´ 2 nh√°nh workflow, node n√†o th∆∞·ªùng d√πng?",
          correct: { label: "Merge", emoji:"üîÄ" },
          decoys: [
            { label:"IF", emoji:"üß†" },
            { label:"Cron", emoji:"‚è∞" },
            { label:"Webhook", emoji:"ü™ù" },
            { label:"Set", emoji:"‚úçÔ∏è" }
          ],
          hint: "üí° T√™n node nghƒ©a l√† 'g·ªôp'.",
          explanation: "‚úÖ Merge d√πng ƒë·ªÉ g·ªôp/merge streams. ‚ùå IF/Cron/Webhook/Set kh√¥ng ph·∫£i ƒë·ªÉ h·ª£p nh√°nh."
        },
        {
          id: "n8n-009",
          tags: ["debug","ops"],
          question: "M·ªôt best practice khi workflow l·ªói: b·∫°n n√™n l√†m g√¨ tr∆∞·ªõc ƒë·ªÉ x√°c ƒë·ªãnh node g√¢y l·ªói?",
          correct: { label: "Xem Execution data/Logs", emoji:"üßæ" },
          decoys: [
            { label:"X√≥a workflow v√† l√†m l·∫°i", emoji:"üóëÔ∏è" },
            { label:"TƒÉng timer l√™n 15 ph√∫t", emoji:"‚è±Ô∏è" },
            { label:"T·∫Øt h·∫øt trigger vƒ©nh vi·ªÖn", emoji:"üö´" },
            { label:"ƒê·ªïi t√™n t·∫•t c·∫£ node", emoji:"üè∑Ô∏è" }
          ],
          hint: "üí° B·∫Øt ƒë·∫ßu t·ª´ d·ªØ li·ªáu ch·∫°y th·ª±c t·∫ø (execution).",
          explanation: "‚úÖ Execution data/logs cho bi·∫øt input/output t·ª´ng node. ‚ùå X√≥a/t·∫Øt vƒ©nh vi·ªÖn/ƒë·ªïi t√™n kh√¥ng gi·∫£i quy·∫øt g·ªëc r·ªÖ."
        },
        {
          id: "n8n-010",
          tags: ["security","ops"],
          question: "ƒê·ªÉ b·∫£o v·ªá credential/API key trong n8n, b·∫°n n√™n l∆∞u ·ªü ƒë√¢u?",
          correct: { label: "Credentials (vault) c·ªßa n8n", emoji:"üîê" },
          decoys: [
            { label:"Ghi th·∫≥ng v√†o Set node", emoji:"‚úçÔ∏è" },
            { label:"D√°n v√†o ghi ch√∫ workflow", emoji:"üìù" },
            { label:"G·ª≠i v√†o Slack c√¥ng khai", emoji:"üì£" },
            { label:"Hard-code trong Code node", emoji:"üßë‚Äçüíª" }
          ],
          hint: "üí° N∆°i qu·∫£n l√Ω t·∫≠p trung, ph√¢n quy·ªÅn, thay ƒë·ªïi an to√†n.",
          explanation: "‚úÖ Credentials c·ªßa n8n qu·∫£n l√Ω b√≠ m·∫≠t an to√†n. ‚ùå Hard-code/d√°n c√¥ng khai d·ªÖ r√≤ r·ªâ."
        },
        {
          id: "n8n-011",
          tags: ["pattern","retry"],
          question: "Khi API th·ªânh tho·∫£ng l·ªói (429/5xx), gi·∫£i ph√°p ph√π h·ª£p l√† g√¨?",
          correct: { label: "Retry + Backoff", emoji:"‚ôªÔ∏è" },
          decoys: [
            { label:"G·ªçi l·∫°i li√™n t·ª•c kh√¥ng delay", emoji:"üèÉ" },
            { label:"T·∫Øt h·∫≥n workflow", emoji:"üö´" },
            { label:"B·ªè qua l·ªói m·ªçi l√∫c", emoji:"üôà" },
            { label:"Gi·∫£m log ƒë·ªÉ ƒë·ª° th·∫•y l·ªói", emoji:"ü´•" }
          ],
          hint: "üí° Th·ª≠ l·∫°i c√≥ ki·ªÉm so√°t v√† gi√£n c√°ch.",
          explanation: "‚úÖ Retry/backoff gi√∫p ·ªïn ƒë·ªãnh v√† t√¥n tr·ªçng rate limit. ‚ùå Spam request d·ªÖ b·ªã block; b·ªè qua l·ªói l√†m m·∫•t d·ªØ li·ªáu."
        },
        {
          id: "n8n-012",
          tags: ["design","idempotency"],
          question: "Kh√°i ni·ªám gi√∫p tr√°nh ch·∫°y tr√πng thao t√°c khi workflow b·ªã retry l√† g√¨?",
          correct: { label: "Idempotency", emoji:"üß∑" },
          decoys: [
            { label:"Obfuscation", emoji:"ü´•" },
            { label:"Normalization", emoji:"üìè" },
            { label:"Minification", emoji:"üóúÔ∏è" },
            { label:"Pagination", emoji:"üìÑ" }
          ],
          hint: "üí° M·ªôt request ch·∫°y l·∫°i v·∫´n cho k·∫øt qu·∫£ nh∆∞ 1 l·∫ßn ch·∫°y.",
          explanation: "‚úÖ Idempotency gi√∫p kh√¥ng t·∫°o b·∫£n ghi tr√πng khi retry. ‚ùå C√°c l·ª±a ch·ªçn kh√°c kh√¥ng ƒë√∫ng ng·ªØ c·∫£nh."
        },
        {
          id: "n8n-013",
          tags: ["practice","ops"],
          question: "Trong automation, ∆∞u ti√™n n√†o gi√∫p workflow b·ªÅn v·ªØng nh·∫•t?",
          correct: { label: "Quan s√°t + c·∫£nh b√°o (monitoring)", emoji:"üì°" },
          decoys: [
            { label:"Th√™m th·∫≠t nhi·ªÅu node kh√¥ng c·∫ßn thi·∫øt", emoji:"üß±" },
            { label:"Ch·ªâ test m·ªôt l·∫ßn r·ªìi th√¥i", emoji:"üß™" },
            { label:"Gi·∫•u l·ªói ƒë·ªÉ 'ƒë·ª° phi·ªÅn'", emoji:"üôÉ" },
            { label:"Ch·∫°y m·ªçi th·ª© b·∫±ng t√†i kho·∫£n admin", emoji:"üëë" }
          ],
          hint: "üí° B·∫°n c·∫ßn nh√¨n th·∫•y s·ªõm khi c√≥ v·∫•n ƒë·ªÅ.",
          explanation: "‚úÖ Monitoring/alert gi√∫p ph√°t hi·ªán v√† x·ª≠ l√Ω s·ªõm. ‚ùå Admin qu√° quy·ªÅn & gi·∫•u l·ªói l√† r·ªßi ro l·ªõn."
        },
        {
          id: "n8n-014",
          tags: ["design","data"],
          question: "M·ªôt nguy√™n t·∫Øc t·ªët khi ƒë·∫∑t t√™n node/workflow ƒë·ªÉ d·ªÖ b·∫£o tr√¨ l√† g√¨?",
          correct: { label: "T√™n m√¥ t·∫£ h√†nh ƒë·ªông + h·ªá th·ªëng", emoji:"üè∑Ô∏è" },
          decoys: [
            { label:"ƒê·∫∑t t√™n 'test1', 'test2' cho nhanh", emoji:"‚ö°" },
            { label:"Kh√¥ng ƒë·∫∑t t√™n ƒë·ªÉ kh·ªèi r·ªëi", emoji:"ü´•" },
            { label:"T√™n th·∫≠t d√†i v√† kh√≥ ƒë·ªçc", emoji:"üìö" },
            { label:"ƒê·∫∑t t√™n gi·ªëng nhau cho t·∫•t c·∫£", emoji:"üß©" }
          ],
          hint: "üí° Ng∆∞·ªùi kh√°c ƒë·ªçc t√™n l√† hi·ªÉu ngay node l√†m g√¨.",
          explanation: "‚úÖ T√™n m√¥ t·∫£ gi√∫p maintain t·ªët. ‚ùå T√™n v√¥ nghƒ©a/gi·ªëng nhau g√¢y kh√≥ debug v√† chuy·ªÉn giao."
        }
      ]
    };

    /********************************************************************
     * App State
     ********************************************************************/
    const $ = (s, el=document) => el.querySelector(s);
    const $$ = (s, el=document) => Array.from(el.querySelectorAll(s));

    const els = {
      hudTimer: $("#hudTimer"),
      hudScore: $("#hudScore"),
      hudCombo: $("#hudCombo"),
      hudPenalty: $("#hudPenalty"),
      hudRound: $("#hudRound"),
      hudTotal: $("#hudTotal"),
      progressFill: $("#progressFill"),
      statusGame: $("#statusGame"),
      statusText: $("#statusText"),
      qText: $("#qText"),
      hintBox: $("#hintBox"),
      hintText: $("#hintText"),
      expBox: $("#expBox"),
      expText: $("#expText"),
      btnStart: $("#btnStart"),
      btnPause: $("#btnPause"),
      btnReset: $("#btnReset"),
      btnNext: $("#btnNext"),
      btnReveal: $("#btnReveal"),
      btnExport: $("#btnExport"),
      holes: $("#holes"),
      chipTeacher: $("#chipTeacher"),
      teacherModal: $("#teacherModal"),
      btnCloseTeacher: $("#btnCloseTeacher"),
      btnApplyConfig: $("#btnApplyConfig"),
      btnLoadSample: $("#btnLoadSample"),
      configEditor: $("#configEditor"),
      inpMinutes: $("#inpMinutes"),
      inpTick: $("#inpTick"),
      inpMoleLife: $("#inpMoleLife"),
      inpCorrectRate: $("#inpCorrectRate"),
      selMode: $("#selMode"),
      tagTopic: $("#tagTopic"),
      tagDifficulty: $("#tagDifficulty"),
      tagMode: $("#tagMode"),
      toast: $("#toast"),
      toastIcon: $("#toastIcon"),
      toastText: $("#toastText"),
      toastSub: $("#toastSub"),
    };

    let CONFIG = deepClone(SAMPLE_CONFIG);

    const state = {
      running: false,
      paused: false,
      startedAt: 0,
      remainingMs: 0,
      tickHandle: null,
      timerHandle: null,

      roundIndex: -1,
      score: 0,
      combo: 0,
      penalty: 0,

      // per round
      current: null,
      revealed: false,
      shownMoles: new Map(), // holeIndex -> moleData
      history: [], // events for CSV
      totalRounds: 0,

      // spawn
      lastHole: -1,
      moleTimeouts: [],
    };

    /********************************************************************
     * Build UI: holes
     ********************************************************************/
    function buildHoles(){
      els.holes.innerHTML = "";
      const count = 9;
      for(let i=0;i<count;i++){
        const hole = document.createElement("div");
        hole.className = "hole";
        hole.setAttribute("data-hole", String(i));
        const mole = document.createElement("div");
        mole.className = "mole";
        mole.innerHTML = `
          <div class="card">
            <div class="emoji" aria-hidden="true">üéØ</div>
            <div class="label">‚Äî</div>
            <div class="sub">Tap/Click</div>
          </div>
        `;
        hole.appendChild(mole);
        hole.addEventListener("click", () => onWhack(i));
        els.holes.appendChild(hole);
      }
    }

    /********************************************************************
     * Game controls
     ********************************************************************/
    function setStatus(text, on=false){
      els.statusText.textContent = text;
      els.statusGame.classList.toggle("on", on);
    }

    function formatMs(ms){
      ms = Math.max(0, ms|0);
      const s = Math.floor(ms/1000);
      const m = Math.floor(s/60);
      const ss = String(s%60).padStart(2,'0');
      const mm = String(m).padStart(2,'0');
      return `${mm}:${ss}`;
    }

    function updateHUD(){
      els.hudScore.textContent = String(state.score);
      els.hudCombo.textContent = "x" + String(state.combo);
      els.hudPenalty.textContent = String(state.penalty);
      els.hudRound.textContent = String(Math.max(0, state.roundIndex+1));
      els.hudTotal.textContent = String(state.totalRounds);
      const p = state.totalRounds ? ((Math.max(0, state.roundIndex+1))/state.totalRounds)*100 : 0;
      els.progressFill.style.width = `${Math.min(100, p)}%`;

      els.tagTopic.textContent = "TOPIC:" + (CONFIG.meta?.topic || "n8n");
      els.tagDifficulty.textContent = "LEVEL:" + (CONFIG.meta?.level || "mix");
      els.tagMode.textContent = "MODE:" + (CONFIG.settings?.mode || "keyword");
    }

    function resetRoundUI(){
      state.revealed = false;
      els.hintBox.classList.add("hidden");
      els.expBox.classList.add("hidden");
      els.hintText.textContent = "‚Äî";
      els.expText.textContent = "‚Äî";
    }

    function showToast(icon, text, sub=""){
      els.toastIcon.textContent = icon;
      els.toastText.textContent = text;
      els.toastSub.textContent = sub;
      els.toast.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => els.toast.classList.remove("show"), 2200);
    }

    function startGame(){
      if(state.running && !state.paused) return;
      if(!state.running){
        // New session
        state.running = true;
        state.paused = false;
        state.score = 0;
        state.combo = 0;
        state.penalty = 0;
        state.history = [];
        state.roundIndex = -1;
        state.totalRounds = (CONFIG.items?.length || 0);
        state.remainingMs = clamp((CONFIG.settings.minutes||6) * 60 * 1000, 10_000, 15*60*1000);
        state.startedAt = Date.now();

        nextRound(true);
        setStatus("PLAYING", true);
        showToast("‚ñ∂Ô∏è", "B·∫Øt ƒë·∫ßu!", "ƒê·∫≠p m·ª•c ti√™u ƒë√∫ng ƒë·ªÉ ghi ƒëi·ªÉm.");
      }else{
        // Resume
        state.paused = false;
        setStatus("PLAYING", true);
        showToast("‚ñ∂Ô∏è", "Ti·∫øp t·ª•c", "Ch√∫c may m·∫Øn!");
      }

      els.btnStart.textContent = state.paused ? "‚ñ∂ Resume" : "‚ñ∂ Start";
      runLoops();
      updateHUD();
    }

    function pauseGame(){
      if(!state.running) return;
      if(state.paused){
        startGame();
        return;
      }
      state.paused = true;
      stopLoops();
      clearMoles();
      setStatus("PAUSED", false);
      showToast("‚è∏Ô∏è", "T·∫°m d·ª´ng", "Nh·∫•n Start ƒë·ªÉ ti·∫øp t·ª•c.");
    }

    function resetGame(){
      stopLoops();
      clearMoles();
      state.running = false;
      state.paused = false;
      state.score = 0;
      state.combo = 0;
      state.penalty = 0;
      state.roundIndex = -1;
      state.current = null;
      state.revealed = false;
      state.history = [];
      state.totalRounds = (CONFIG.items?.length || 0);
      state.remainingMs = clamp((CONFIG.settings.minutes||6) * 60 * 1000, 10_000, 15*60*1000);

      els.hudTimer.textContent = formatMs(state.remainingMs);
      els.btnStart.textContent = "‚ñ∂ Start";
      setStatus("READY", false);
      els.qText.innerHTML = `Nh·∫•n <b>Start</b> ƒë·ªÉ b·∫Øt ƒë·∫ßu. Khi ‚Äúm·ª•c ti√™u ƒë√∫ng‚Äù xu·∫•t hi·ªán, h√£y ƒë·∫≠p nhanh! üí•`;
      resetRoundUI();
      updateHUD();
      showToast("‚Ü∫", "ƒê√£ reset", "Ch·ªçn Start ƒë·ªÉ ch∆°i l·∫°i.");
    }

    function stopLoops(){
      clearInterval(state.tickHandle);
      clearInterval(state.timerHandle);
      state.tickHandle = null;
      state.timerHandle = null;
    }

    function runLoops(){
      stopLoops();
      // Timer
      state.timerHandle = setInterval(() => {
        if(!state.running || state.paused) return;
        state.remainingMs -= 250;
        els.hudTimer.textContent = formatMs(state.remainingMs);
        if(state.remainingMs <= 0){
          endGame();
        }
      }, 250);

      // Spawn loop
      state.tickHandle = setInterval(() => {
        if(!state.running || state.paused) return;
        spawnMole();
      }, clamp(CONFIG.settings.tickMs||900, 350, 1600));
    }

    function endGame(){
      stopLoops();
      clearMoles();
      state.running = false;
      state.paused = false;
      setStatus("FINISHED", false);
      els.btnStart.textContent = "‚ñ∂ Start";
      els.hudTimer.textContent = "00:00";

      const summary = `Score: ${state.score} ‚Ä¢ Penalty: ${state.penalty} ‚Ä¢ Rounds: ${Math.max(0,state.roundIndex+1)}/${state.totalRounds}`;
      showToast("üèÅ", "K·∫øt th√∫c!", summary);
      // Auto reveal last explanation if any
      reveal(true);
    }

    /********************************************************************
     * Rounds
     ********************************************************************/
    function nextRound(fromStart=false){
      if(!CONFIG.items || CONFIG.items.length === 0){
        els.qText.textContent = "CONFIG.items tr·ªëng. V√†o Teacher Mode ƒë·ªÉ d√°n JSON c√¢u h·ªèi.";
        return;
      }
      resetRoundUI();
      state.roundIndex++;
      if(state.roundIndex >= CONFIG.items.length){
        // Loop or end? We'll loop to keep within 5‚Äì15 mins.
        state.roundIndex = 0;
      }
      state.current = normalizeItem(CONFIG.items[state.roundIndex]);
      state.revealed = false;
      els.qText.textContent = state.current.question;

      els.hintText.textContent = state.current.hint || "‚Äî";
      els.expText.textContent = state.current.explanation || "‚Äî";

      updateHUD();

      if(!fromStart){
        showToast("‚è≠Ô∏è", "Round ti·∫øp theo", `#${state.roundIndex+1}: ${shorten(state.current.question, 72)}`);
      }
    }

    function reveal(force=false){
      if(!state.current) return;
      if(state.revealed && !force){
        // toggle off
        state.revealed = false;
        els.hintBox.classList.add("hidden");
        els.expBox.classList.add("hidden");
        showToast("ü´•", "ƒê√£ ·∫©n", "Hint/Explanation");
        return;
      }
      state.revealed = true;
      els.hintBox.classList.remove("hidden");
      els.expBox.classList.remove("hidden");
      showToast("ü™Ñ", "Reveal", "Hi·ªán g·ª£i √Ω & gi·∫£i th√≠ch");
    }

    /********************************************************************
     * Mole spawn and whack logic
     ********************************************************************/
    function clearMoles(){
      // cancel scheduled hides
      state.moleTimeouts.forEach(t => clearTimeout(t));
      state.moleTimeouts = [];
      state.shownMoles.clear();

      $$(".hole", els.holes).forEach(h => {
        const mole = h.querySelector(".mole");
        mole.classList.remove("show","correct","wrong");
      });
    }

    function spawnMole(){
      if(!state.current) return;

      // choose hole not same as last (if possible)
      const holeCount = $$(".hole", els.holes).length;
      let holeIdx = randInt(0, holeCount-1);
      if(holeCount > 1){
        let tries = 0;
        while(holeIdx === state.lastHole && tries < 6){
          holeIdx = randInt(0, holeCount-1);
          tries++;
        }
      }
      state.lastHole = holeIdx;

      // determine whether this mole is correct
      const isCorrect = Math.random() * 100 < clamp(CONFIG.settings.correctRate||55, 10, 90);

      // pick content
      const moleData = buildMoleData(state.current, isCorrect);

      // show
      const holeEl = $(`.hole[data-hole="${holeIdx}"]`, els.holes);
      const moleEl = holeEl.querySelector(".mole");
      moleEl.classList.remove("correct","wrong");
      moleEl.classList.add(isCorrect ? "correct" : "wrong");
      moleEl.querySelector(".emoji").textContent = moleData.emoji || (isCorrect ? "‚úÖ" : "‚ùå");
      moleEl.querySelector(".label").textContent = moleData.label;
      moleEl.querySelector(".sub").textContent = isCorrect ? "ƒê·∫¨P ƒê√öNG ‚úÖ" : "B·∫™Y ‚ùå";

      // store
      state.shownMoles.set(holeIdx, {
        ...moleData,
        isCorrect,
        roundId: state.current.id,
        tsShown: Date.now()
      });

      moleEl.classList.add("show");

      // schedule hide
      const life = clamp(CONFIG.settings.moleLifeMs||850, 250, 1400);
      const t = setTimeout(() => {
        // If still same mole and not whacked
        if(state.shownMoles.has(holeIdx)){
          const d = state.shownMoles.get(holeIdx);
          state.shownMoles.delete(holeIdx);
          moleEl.classList.remove("show");
          // Missed a correct target? small penalty
          if(d.isCorrect){
            applyPenalty("Missed correct target", 1, { holeIdx, label: d.label });
            showToast("üò¨", "B·ªè l·ª° m·ª•c ti√™u ƒë√∫ng!", `-1 (ƒë·∫≠p nhanh h∆°n)`);
          }
          updateHUD();
        }else{
          moleEl.classList.remove("show");
        }
      }, life);
      state.moleTimeouts.push(t);
    }

    function onWhack(holeIdx){
      if(!state.running || state.paused) return;

      const data = state.shownMoles.get(holeIdx);
      if(!data){
        // whacked empty hole
        applyPenalty("Whacked empty", 1, { holeIdx });
        state.combo = 0;
        updateHUD();
        showToast("üï≥Ô∏è", "ƒê·∫≠p h·ª•t!", "Penalty -1 ‚Ä¢ Combo reset");
        return;
      }

      // remove mole immediately
      state.shownMoles.delete(holeIdx);
      const holeEl = $(`.hole[data-hole="${holeIdx}"]`, els.holes);
      const moleEl = holeEl.querySelector(".mole");
      moleEl.classList.remove("show");

      const reactionMs = Date.now() - data.tsShown;

      if(data.isCorrect){
        // score + combo
        state.combo += 1;
        const base = 3;
        const speedBonus = reactionMs < 280 ? 3 : reactionMs < 420 ? 2 : reactionMs < 650 ? 1 : 0;
        const comboBonus = Math.min(6, Math.floor(state.combo/3)); // +1 each 3 streak, capped
        const gain = base + speedBonus + comboBonus;
        state.score += gain;

        // log
        logEvent("HIT_CORRECT", {
          roundId: data.roundId,
          label: data.label,
          holeIdx,
          reactionMs,
          gain,
          combo: state.combo
        });

        showToast("‚úÖ", `ƒê√öNG! +${gain}`, `Reaction ${reactionMs}ms ‚Ä¢ Combo x${state.combo}`);
        // advance round occasionally to keep variety
        if(state.combo % 4 === 0){
          nextRound();
        }
      }else{
        // wrong target: penalty and combo reset
        state.combo = 0;
        const loss = 2;
        state.score -= loss;
        state.penalty += loss;

        logEvent("HIT_WRONG", {
          roundId: data.roundId,
          label: data.label,
          holeIdx,
          reactionMs,
          loss
        });

        showToast("‚ùå", `SAI! -${loss}`, `B·∫´y ‚ùå ‚Ä¢ Combo reset`);
      }

      clampScore();
      updateHUD();
    }

    function applyPenalty(reason, amount, extra={}){
      state.score -= amount;
      state.penalty += amount;
      clampScore();
      logEvent("PENALTY", { reason, amount, ...extra, roundId: state.current?.id || "" });
    }

    function clampScore(){
      if(!Number.isFinite(state.score)) state.score = 0;
      state.score = Math.max(-999, Math.min(9999, state.score));
    }

    function buildMoleData(item, isCorrect){
      const mode = CONFIG.settings.mode || "keyword";
      if(mode === "statement"){
        // For statement mode, each item can define: correctStatement, decoyStatements
        // fallback: use keyword-based to build statements
        const correctSt = item.correctStatement || `‚úÖ ${item.correct.label} l√† kh√°i ni·ªám ƒë√∫ng trong n8n.`;
        const decoys = item.decoyStatements && item.decoyStatements.length ? item.decoyStatements : [
          `‚ùå "${pick(item.decoys).label}" l√† node ch√≠nh ƒë·ªÉ ch·∫°y theo l·ªãch (cron).`,
          `‚ùå Webhook d√πng ƒë·ªÉ g·ªçi API ra ngo√†i (th·ª±c ra l√† nh·∫≠n request).`,
          `‚ùå Set node chuy√™n ƒë·ªÉ merge d·ªØ li·ªáu hai nh√°nh.`
        ];
        const label = isCorrect ? correctSt : pick(decoys);
        return { label, emoji: isCorrect ? "‚úÖ" : "‚ùå" };
      }

      // keyword mode
      if(isCorrect){
        return { label: item.correct.label, emoji: item.correct.emoji || "‚úÖ" };
      }
      const d = pick(item.decoys);
      return { label: d.label, emoji: d.emoji || "‚ùå" };
    }

    /********************************************************************
     * CSV Export
     ********************************************************************/
    function exportCSV(){
      const rows = [];
      // header
      rows.push([
        "timestamp",
        "event",
        "roundId",
        "question",
        "label",
        "holeIdx",
        "reactionMs",
        "gain",
        "loss",
        "scoreAfter",
        "comboAfter",
        "penaltyAfter"
      ]);

      for(const e of state.history){
        const item = findItemById(e.roundId);
        rows.push([
          new Date(e.ts).toISOString(),
          e.type,
          e.roundId || "",
          (item?.question || "").replace(/\s+/g, " ").trim(),
          (e.label || ""),
          (e.holeIdx ?? ""),
          (e.reactionMs ?? ""),
          (e.gain ?? ""),
          (e.loss ?? ""),
          (e.scoreAfter ?? ""),
          (e.comboAfter ?? ""),
          (e.penaltyAfter ?? "")
        ]);
      }

      const csv = rows.map(r => r.map(cell => {
        const s = String(cell ?? "");
        if(/[",\n]/.test(s)) return `"${s.replaceAll('"','""')}"`;
        return s;
      }).join(",")).join("\n");

      const blob = new Blob([csv], { type:"text/csv;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `whack-a-workflow_results_${Date.now()}.csv`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(() => URL.revokeObjectURL(url), 1000);

      showToast("‚¨áÔ∏è", "ƒê√£ xu·∫•t CSV", "M·ªü file ƒë·ªÉ xem log & ƒëi·ªÉm.");
    }

    function logEvent(type, data){
      const rec = {
        ts: Date.now(),
        type,
        roundId: data.roundId || "",
        label: data.label || "",
        holeIdx: data.holeIdx,
        reactionMs: data.reactionMs,
        gain: data.gain,
        loss: data.loss,
        scoreAfter: state.score,
        comboAfter: state.combo,
        penaltyAfter: state.penalty
      };
      state.history.push(rec);
    }

    function findItemById(id){
      if(!id) return null;
      return (CONFIG.items || []).find(x => String(x.id) === String(id)) || null;
    }

    /********************************************************************
     * Teacher Mode
     ********************************************************************/
    const TEACHER_PASSWORD = "1234"; // ƒë·ªïi n·∫øu mu·ªën
    function openTeacher(){
      // simple password prompt (only on first open per session)
      if(!openTeacher._ok){
        const p = prompt("Teacher password:", "");
        if(p !== TEACHER_PASSWORD){
          showToast("üîí", "Sai m·∫≠t kh·∫©u", "Kh√¥ng m·ªü Teacher Mode.");
          els.chipTeacher.classList.remove("on");
          return;
        }
        openTeacher._ok = true;
      }
      els.teacherModal.classList.add("open");
      els.configEditor.value = JSON.stringify(CONFIG, null, 2);
      els.inpMinutes.value = CONFIG.settings.minutes ?? 6;
      els.inpTick.value = CONFIG.settings.tickMs ?? 900;
      els.inpMoleLife.value = CONFIG.settings.moleLifeMs ?? 850;
      els.inpCorrectRate.value = CONFIG.settings.correctRate ?? 55;
      els.selMode.value = CONFIG.settings.mode ?? "keyword";
    }
    function closeTeacher(){
      els.teacherModal.classList.remove("open");
    }
    function applyTeacher(){
      try{
        const parsed = JSON.parse(els.configEditor.value);
        if(!parsed || !Array.isArray(parsed.items) || parsed.items.length === 0){
          throw new Error("CONFIG.items ph·∫£i l√† m·∫£ng v√† kh√¥ng ƒë∆∞·ª£c r·ªóng.");
        }
        // apply numeric settings
        parsed.settings = parsed.settings || {};
        parsed.settings.minutes = clamp(Number(els.inpMinutes.value||6), 1, 15);
        parsed.settings.tickMs = clamp(Number(els.inpTick.value||900), 350, 1600);
        parsed.settings.moleLifeMs = clamp(Number(els.inpMoleLife.value||850), 250, 1400);
        parsed.settings.correctRate = clamp(Number(els.inpCorrectRate.value||55), 10, 90);
        parsed.settings.mode = els.selMode.value || "keyword";

        CONFIG = parsed;

        // Re-normalize a copy to avoid missing fields
        CONFIG.items = CONFIG.items.map(normalizeItem);

        // If game is running, restart loops to take effect
        updateHUD();
        if(state.running && !state.paused){
          runLoops();
        }else{
          els.hudTimer.textContent = formatMs(clamp((CONFIG.settings.minutes||6)*60*1000, 10_000, 15*60*1000));
        }
        state.totalRounds = CONFIG.items.length;

        closeTeacher();
        showToast("‚úÖ", "ƒê√£ √°p d·ª•ng", "C·∫•u h√¨nh Teacher Mode ƒë∆∞·ª£c c·∫≠p nh·∫≠t.");
      }catch(err){
        alert("CONFIG JSON l·ªói:\n" + (err?.message || err));
      }
    }

    function loadSample(){
      CONFIG = deepClone(SAMPLE_CONFIG);
      els.configEditor.value = JSON.stringify(CONFIG, null, 2);
      els.inpMinutes.value = CONFIG.settings.minutes;
      els.inpTick.value = CONFIG.settings.tickMs;
      els.inpMoleLife.value = CONFIG.settings.moleLifeMs;
      els.inpCorrectRate.value = CONFIG.settings.correctRate;
      els.selMode.value = CONFIG.settings.mode;
      showToast("‚Ü©Ô∏è", "ƒê√£ n·∫°p sample", "B·∫°n c√≥ th·ªÉ s·ª≠a JSON r·ªìi Apply.");
    }

    /********************************************************************
     * Keyboard shortcuts
     ********************************************************************/
    function onKey(e){
      const k = e.key.toLowerCase();
      if(k === " "){
        e.preventDefault();
        // Space: start/resume if not running; else next
        if(!state.running){
          startGame();
        }else if(state.paused){
          startGame();
        }else{
          nextRound();
        }
      }
      if(k === "escape"){
        e.preventDefault();
        pauseGame();
      }
      if(k === "r"){
        e.preventDefault();
        reveal();
      }
      // Optional 1/2/3/4 picks not needed in whack mode, reserved
    }

    /********************************************************************
     * Utils
     ********************************************************************/
    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }
    function randInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
    function deepClone(o){ return JSON.parse(JSON.stringify(o)); }
    function shorten(s, n){
      s = String(s||"").trim();
      return s.length > n ? s.slice(0, n-1) + "‚Ä¶" : s;
    }
    function normalizeItem(item){
      const x = deepClone(item || {});
      x.id = x.id || ("item-" + Math.random().toString(16).slice(2));
      x.tags = Array.isArray(x.tags) ? x.tags : [];
      x.question = x.question || "C√¢u h·ªèi (ch∆∞a c√≥ n·ªôi dung)";
      // correct
      if(!x.correct || typeof x.correct !== "object"){
        x.correct = { label: "Correct", emoji:"‚úÖ" };
      }else{
        x.correct.label = x.correct.label || "Correct";
        x.correct.emoji = x.correct.emoji || "‚úÖ";
      }
      // decoys
      if(!Array.isArray(x.decoys) || x.decoys.length < 2){
        x.decoys = [
          { label:"Decoy A", emoji:"‚ùå" },
          { label:"Decoy B", emoji:"‚ùå" },
          { label:"Decoy C", emoji:"‚ùå" }
        ];
      }else{
        x.decoys = x.decoys.map(d => ({
          label: (d && d.label) ? String(d.label) : "Decoy",
          emoji: (d && d.emoji) ? String(d.emoji) : "‚ùå"
        }));
      }
      x.hint = x.hint || "üí° (Ch∆∞a c√≥ g·ª£i √Ω)";
      x.explanation = x.explanation || "üîç (Ch∆∞a c√≥ gi·∫£i th√≠ch)";
      return x;
    }

    /********************************************************************
     * Wire up events
     ********************************************************************/
    function init(){
      buildHoles();
      updateHUD();
      state.totalRounds = CONFIG.items.length;
      els.hudTimer.textContent = formatMs((CONFIG.settings.minutes||6) * 60 * 1000);

      els.btnStart.addEventListener("click", startGame);
      els.btnPause.addEventListener("click", pauseGame);
      els.btnReset.addEventListener("click", resetGame);
      els.btnNext.addEventListener("click", () => nextRound());
      els.btnReveal.addEventListener("click", () => reveal());
      els.btnExport.addEventListener("click", exportCSV);

      els.chipTeacher.addEventListener("click", () => {
        const on = !els.chipTeacher.classList.contains("on");
        els.chipTeacher.classList.toggle("on", on);
        if(on) openTeacher(); else closeTeacher();
      });
      els.btnCloseTeacher.addEventListener("click", () => {
        els.chipTeacher.classList.remove("on");
        closeTeacher();
      });
      els.btnApplyConfig.addEventListener("click", applyTeacher);
      els.btnLoadSample.addEventListener("click", loadSample);

      // Close modal when clicking backdrop
      els.teacherModal.addEventListener("click", (e) => {
        if(e.target === els.teacherModal){
          els.chipTeacher.classList.remove("on");
          closeTeacher();
        }
      });

      document.addEventListener("keydown", onKey);

      // Initial hint
      showToast("üëã", "S·∫µn s√†ng!", "Nh·∫•n Start ho·∫∑c Space ƒë·ªÉ b·∫Øt ƒë·∫ßu.");
    }

    init();

    /********************************************************************
     * H∆Ø·ªöNG D·∫™N NHANH (cu·ªëi file)
     * 1) ƒê·ªïi d·ªØ li·ªáu:
     *    - M·ªü Teacher Mode (password: 1234)
     *    - S·ª≠a JSON trong CONFIG.items (question/correct/decoys/hint/explanation)
     *    - Apply & Close
     *
     * 2) C√°ch ch∆°i tr√™n l·ªõp (g·ª£i √Ω 10‚Äì15 ph√∫t):
     *    - Chia 2 ƒë·ªôi, m·ªói l∆∞·ª£t 1 h·ªçc vi√™n l√™n ƒë·∫≠p 10‚Äì15s
     *    - ƒê·∫≠p ƒë√∫ng + ƒëi·ªÉm, ƒë·∫≠p b·∫´y tr·ª´ ƒëi·ªÉm, combo tƒÉng th∆∞·ªüng
     *    - Nh·∫•n Space ƒë·ªÉ Next round, R ƒë·ªÉ Reveal hint/explanation, Esc ƒë·ªÉ Pause
     *
     * 3) Xu·∫•t k·∫øt qu·∫£:
     *    - B·∫•m Export CSV ƒë·ªÉ t·∫£i log (ƒëi·ªÉm, penalty, reaction time)
     ********************************************************************/
  </script>
</body>
</html>
